# Ejemplos de Anotaciones en C#
En este ejemplo se pretende mostrar la forma en la que C# permite el uso de aspectos en la programación orientada a objetos. 
Las anotaciones son una forma de añadir metadatos a nuestro código, concretamente a tipos, métodos u objetos. Estas anotaciones sirven para describir el comportamiento del elemento que las posea o incluso dotarles de algunos comportamientos extra en tiempo de ejecución. Existen algunas bibliotecas en los lenguajes que ofrecen anotaciones prediseñadas para su uso, aunque el programador puede crear sus anotaciones personalizadas si así lo desea. En el caso de C#, las anotaciones se conocen como atributos. Normalmente, se utilizan las anotaciones personalizadas para la inyección de dependencias, pero en C# se utilizan más para la serialización, validación de campos o creación de aspectos, y para todos estas situaciones existen librerías que resultan de gran ayuda. Aun así, existen formas de crear anotaciones personalizadas, y modificar el comportamiento de ciertos métodos de forma que el código sigue siendo reutilizable y mantenible.

## Contexto de los ejemplos
El ejemplo trata sobre unos supuestos magos de dos tipos: Magos de luz y magos oscuros. Los magos tienen un nombre y cierta experiencia acumulada por sus batallas, y una serie de hechizos específicos para cada clase. Algunos de estos hechizos otorgan experiencia al mago cuando hace uso de ellos, y otros no. Dentro de los hechizos que aumentan la experiencia de los magos, algunos lo hacen en mayor medida y otros en menor. La forma de subir experiencia es la misma para todos los hechizos, pero los hechizos que aumentan experiencia y la cantidad de experiencia que otorgan es diferente.

## Problema
Añadir "manualmente" la gestión de la experiencia en cada uno de los métodos puede ser tedioso, generar duplicación de código y disminuir por tanto la mantenibilidad y legibilidad del código. Crear métodos que gestionen esto podría crear más dependencias de las deseadas, especialmente si en el futuro surgen nuevas formas de ganar experiencia o más tipos de magos.

## Solución
Las anotaciones son una forma muy útil de hacer que la gestión de la experiencia sea más ágil. En este caso, creamos la anotación personalizada AnotacionExp, que contiene un entero que indica la cantidad de experiencia que otorgará cada hechizo. Para señalar que un hechizo otorga cierta experiencia, sólo tenemos que añadir la anotación al método correspondiente, con el número de puntos de experiencia que otorga. Esta anotación afecta a métodos, como se indica en la propia anotacion con AttributeTargets.Method. Las anotaciones también pueden afectar a atributos concretos de la clase, o a todos los objetos de una clase.
Cuando los magos lanzan un hechizo, se llama a la clase CalculaEXP, que mediante reflexión obtiene los atributos de la anotación (si el método tenía la anotación) y aumenta la experiencia del mago según la misma.